function getById(e) { resetDatafromFrom(), $.ajax({ type: "POST", url: "/AP/GetDataById", data: { id: e }, success: function (e) { "" == e ? swal("WARNING!", "You cannot edit this info / No Permission", "warning") : ($("#Air_ID").val(e[0].Air_ID), $("#Payable_Code").val(e[0].Payable_Code), $("#Payable_Code").prop("readonly", !0), $("#Payable_Supplier").val(e[0].Payable_Supplier), $("#Ticket_Commission").val(e[0].Ticket_Commission), $("#VAT").val(e[0].VAT), $("#Cat_ID").val(e[0].Cat_ID), $("#btnSave").hide(), $("#btnUpdate").show(), $(".modal-title").text("Update Agent"), $("#myModal").modal("show"), $(".modal-header").addClass("bg-primary"), $(".modal-header").removeClass("bg-success")) } }) } function deleteById(e) { progid = []; var a = $("#myTable").DataTable().row("#" + e).data(), t = a[1], o = a[2]; swal({ title: "Are you sure?", text: "Your will not be able to recover " + (t + ", " + o) + " Data!", type: "warning", showCancelButton: !0, confirmButtonColor: "#DD6B55", confirmButtonText: "Yes, delete it!", cancelButtonText: "No, cancel plx!", closeOnConfirm: !1, closeOnCancel: !1 }, (function (a) { a ? $.ajax({ type: "POST", url: "/AP/DeleteDataByID", data: { id: e }, success: function (a) { if (a.success) if ("Delete" == a.Delete) { var t = $("#myTable").DataTable(); index = t.row("#" + e); t.row(index[0]).data(); t.row(index[0]).remove().draw(), progid.push(a.NextID), $("#Air_ID").val(progid), $(".ui-pnotify").remove(), new PNotify({ title: "DELETED!", text: a.message, type: "error", animation: "slide", delay: 3e3, top: "500px", min_height: "16px", animate_speed: 400, text_escape: !0, styling: "bootstrap3" }), swal("Deleted!", a.message, "success"), setTimeout((function () { swal.close() }), 1e3) } else swal("Error!", a.message, "error"); else swal("WARNING!", "You cannot delete this info / No Permission", "warning") } }) : swal("Cancelled", "Your file is safe :)", "error") })) } $("#AddBtn").click((function () { resetDatafromFrom(), $("#btnSave").show(), $("#btnUpdate").hide(), $(".modal-title").text("Add New AP"), $("#myModal").modal("show"), $(".modal-header").removeClass("bg-primary"), $(".modal-header").addClass("bg-success") })), $("#btnUpdate").click((function (e) { if ($("#myForm").valid()) { var a = document.forms.myForm, t = { type: "POST", url: a.action, data: new FormData(a), success: function (e) { if (e.success) { var t = $("#myTable").DataTable(); $("#myModal").modal("hide"), index = t.row("#" + a.Air_ID.value); var o = t.row(index[0]).data(); o[1] = a.Payable_Code.value, o[2] = a.Payable_Supplier.value, o[3] = a.Ticket_Commission.value, o[4] = a.VAT.value, t.row(index[0]).data(o).draw(), $(".ui-pnotify").remove(), new PNotify({ title: "SUCCESS!", text: e.message, type: "success", animation: "slide", delay: 3e3, top: "500px", min_height: "16px", animate_speed: 400, text_escape: !0, styling: "bootstrap3" }) } else swal("Error!", e.message, "error") } }; return "multipart/form-data" == $("form").attr("enctype") && (t.contentType = !1, t.processData = !1), $.ajax(t), !1 } })); var progid = []; function resetDatafromFrom() { $("#Air_ID").prop("readonly", !0), $("#Payable_Code").prop("readonly", !1), $("#myForm")[0].reset(), $(".form-control.is-invalid").removeClass("is-invalid"), 0 == progid ? $("#Air_ID").val(NextID) : $("#Air_ID").val(progid) } $("#btnSave").click((function () { progid = []; var e = document.forms.myForm; if ($("#myForm").valid()) { var a = $("#myTable").DataTable(), t = { type: "POST", url: e.action, data: new FormData(e), success: function (t) { if (t.success) { $("#myModal").modal("hide"); var o = a.row.add(['<button onclick="getById(this.id)" id="' + e.Air_ID.value + '" class="btn btn-primary btn-sm">Edit</button> <button id="' + e.Air_ID.value + '" class="btn btn-danger btn-sm" onclick = "deleteById(id)" > Delete</button > ', e.Payable_Code.value, e.Payable_Supplier.value, e.Ticket_Commission.value, e.VAT.value, '<label class="badge bg-success">AP</label>']).draw(!1), r = $("#myTable").dataTable().fnGetNodes(o); $(r).attr("id", e.Air_ID.value), progid.push(t.NextID), $("#Air_ID").val(progid), $(".ui-pnotify").remove(), new PNotify({ title: "SUCCESS!", text: t.message, type: "success", animation: "slide", delay: 3e3, top: "500px", min_height: "16px", animate_speed: 400, text_escape: !0, styling: "bootstrap3" }) } else swal("Error!", t.message, "error") } }; return "multipart/form-data" == $("form").attr("enctype") && (t.contentType = !1, t.processData = !1), $.ajax(t), !1 } })), $(document).ready((function () { $("#btnUpdate").hide(), $("#myForm").validate({ rules: { Course_ID: { required: !0 } }, messages: { Payable_Code: { required: "Please Enter Payable Code" }, Payable_Supplier: { required: "Please Enter Payable Supplier" }, Ticket_Commission: { required: "Please Enter Ticket Commission" }, Cat_ID: { required: "Please Select Category" }, Email: { required: "Please enter a email address" } }, errorElement: "span", errorPlacement: function (e, a) { e.addClass("invalid-feedback"), a.closest(".form-group").append(e) }, highlight: function (e, a, t) { $(e).addClass("is-invalid") }, unhighlight: function (e, a, t) { $(e).removeClass("is-invalid") } }) })), $((function () { $("#myTable").DataTable({ select: { info: !1 }, order: [1, "asc"], columnDefs: [{ targets: [0], orderable: !1, width: 150 }, { targets: [5], orderable: !1 }], language: { search: "", searchPlaceholder: "Search Course" }, responsive: !0, select: !0, bLengthChange: !1, sScrollX: "100%", sScrollXInner: "100%", bScrollCollapse: !0, processing: !0, sPaginationType: "full_numbers", oLanguage: { sEmptyTable: "No data found, Please click on <b>Add Course</b> Button" } }), $('input[type="search"]').addClass("form-control") }));
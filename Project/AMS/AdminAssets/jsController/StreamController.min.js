function getById(e) { resetDatafromFrom(), $.ajax({ type: "POST", url: "/IStream/GetDataById", data: { id: e }, success: function (e) { "" == e ? swal("WARNING!", "You cannot edit this info / No Permission", "warning") : ($("#Stream_ID").val(e[0].Stream_ID), $("#Stream_Name").val(e[0].Stream_Name), $("#Stream_Status").val(e[0].Stream_Status), $("#btnSave").hide(), $("#btnUpdate").show(), $(".modal-title").text("Update Income Stream"), $("#myModal").modal("show"), $(".modal-header").addClass("bg-primary"), $(".modal-header").removeClass("bg-success")) } }) } function deleteById(e) { progid = []; var a = $("#myTable").DataTable().row("#" + e).data(), t = a[1], r = a[2]; swal({ title: "Are you sure?", text: "Your will not be able to recover " + (t + ", " + r) + " Data!", type: "warning", showCancelButton: !0, confirmButtonColor: "#DD6B55", confirmButtonText: "Yes, delete it!", cancelButtonText: "No, cancel plx!", closeOnConfirm: !1, closeOnCancel: !1 }, (function (a) { a ? $.ajax({ type: "POST", url: "/IStream/DeleteDataByID", data: { id: e }, success: function (a) { if (a.success) if ("Delete" == a.Delete) { var t = $("#myTable").DataTable(); index = t.row("#" + e); t.row(index[0]).data(); t.row(index[0]).remove().draw(), progid.push(a.NextID), $("#Stream_ID").val(progid), $(".ui-pnotify").remove(), new PNotify({ title: "DELETED!", text: a.message, type: "error", animation: "slide", delay: 3e3, top: "500px", min_height: "16px", animate_speed: 400, text_escape: !0, styling: "bootstrap3" }), swal("Deleted!", a.message, "success"), setTimeout((function () { swal.close() }), 1e3) } else swal("Error!", a.message, "error"); else swal("WARNING!", "You cannot delete this info / No Permission", "warning") } }) : swal("Cancelled", "Your file is safe :)", "error") })) } $("#AddBtn").click((function () { resetDatafromFrom(), $("#btnSave").show(), $("#btnUpdate").hide(), $(".modal-title").text("Add New Income Stream"), $("#myModal").modal("show"), $(".modal-header").removeClass("bg-primary"), $(".modal-header").addClass("bg-success") })), $("#btnUpdate").click((function (e) { if ($("#myForm").valid()) { var a = document.forms.myForm, t = { type: "POST", url: a.action, data: new FormData(a), success: function (e) { if (e.success) { var t = $("#myTable").DataTable(); $("#myModal").modal("hide"), index = t.row("#" + a.Stream_ID.value); var r = t.row(index[0]).data(); "1" == a.Stream_Status.value ? (r[2] = a.Stream_Name.value, r[3] = '<label class="badge bg-success">Active</label>') : (r[2] = a.Stream_Name.value, r[3] = '<label class="badge bg-danger">Closed</label>'), t.row(index[0]).data(r).draw(), $(".ui-pnotify").remove(), new PNotify({ title: "SUCCESS!", text: e.message, type: "success", animation: "slide", delay: 3e3, top: "500px", min_height: "16px", animate_speed: 400, text_escape: !0, styling: "bootstrap3" }) } else swal("Error!", e.message, "error") } }; return "multipart/form-data" == $("form").attr("enctype") && (t.contentType = !1, t.processData = !1), $.ajax(t), !1 } })); var progid = []; function resetDatafromFrom() { $("#Stream_ID").prop("readonly", !0), $("#myForm")[0].reset(), $(".form-control.is-invalid").removeClass("is-invalid"), 0 == progid ? $("#Stream_ID").val(NextID) : $("#Stream_ID").val(progid) } $("#btnSave").click((function () { progid = []; var e = document.forms.myForm; if ($("#myForm").valid()) { var a = $("#myTable").DataTable(), t = { type: "POST", url: e.action, data: new FormData(e), success: function (t) { if (t.success) { if ($("#myModal").modal("hide"), "1" == e.Stream_Status.value) var r = a.row.add(['<button onclick="getById(this.id)" id="' + e.Stream_ID.value + '" class="btn btn-primary btn-sm">Edit</button> <button id="' + e.Stream_ID.value + '" class="btn btn-danger btn-sm" onclick = "deleteById(id)" > Delete</button > ', e.Stream_ID.value, e.Stream_Name.value, '<label class="badge bg-success">Active</label>']).draw(!1); else r = a.row.add(['<button onclick="getById(this.id)" id="' + e.Stream_ID.value + '" class="btn btn-primary btn-sm">Edit</button> <button id="' + e.Stream_ID.value + '" class="btn btn-danger btn-sm" onclick="deleteById(id)">Delete</button>', e.Stream_ID.value, e.Stream_Name.value, '<label class="badge bg-danger">Closed</label>']).draw(!1); var s = $("#myTable").dataTable().fnGetNodes(r); $(s).attr("id", e.Stream_ID.value), progid.push(t.NextID), $("#Stream_ID").val(progid), $(".ui-pnotify").remove(), new PNotify({ title: "SUCCESS!", text: t.message, type: "success", animation: "slide", delay: 3e3, top: "500px", min_height: "16px", animate_speed: 400, text_escape: !0, styling: "bootstrap3" }) } else swal("Error!", t.message, "error") } }; return "multipart/form-data" == $("form").attr("enctype") && (t.contentType = !1, t.processData = !1), $.ajax(t), !1 } })), $(document).ready((function () { $("#btnUpdate").hide(), $("#myForm").validate({ rules: { Course_ID: { required: !0 } }, messages: { Stream_ID: { required: "Please Enter Stream ID" }, Stream_Name: { required: "Please Enter Stream Name" }, Stream_Status: { required: "Please Select Stream Status" }, Email: { required: "Please enter a email address" } }, errorElement: "span", errorPlacement: function (e, a) { e.addClass("invalid-feedback"), a.closest(".form-group").append(e) }, highlight: function (e, a, t) { $(e).addClass("is-invalid") }, unhighlight: function (e, a, t) { $(e).removeClass("is-invalid") } }) })), $((function () { $("#myTable").DataTable({ select: { info: !1 }, order: [1, "asc"], columnDefs: [{ width: "150px", targets: [0], orderable: !1 }, { width: "200px", targets: [2], orderable: !1 }, { width: "150px", targets: [3], orderable: !1 }], language: { search: "", searchPlaceholder: "Search Stream" }, responsive: !0, select: !0, bLengthChange: !1, sScrollX: "100%", sScrollXInner: "100%", bScrollCollapse: !0, processing: !0, sPaginationType: "full_numbers", oLanguage: { sEmptyTable: "No data found, Please click on <b>+ Add New Income Stream</b> Button" } }), $('input[type="search"]').addClass("form-control") }));
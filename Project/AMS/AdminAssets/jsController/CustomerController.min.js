function CalculateLookUp(e) { var a = $("#Cust_Code").val(), t = $("#Company_Name").val(); $("#Lookup").val(a + " - " + t) } function getById(e) { resetDatafromFrom(), $.ajax({ type: "POST", url: "/Customer/GetDataById", data: { id: e }, success: function (e) { "" == e ? swal("WARNING!", "You cannot edit this info / No Permission", "warning") : ($("#Cust_ID").val(e[0].Cust_ID), $("#Lookup").val(e[0].Lookup), $("#Cust_Code").val(e[0].Cust_Code), $("#Company_Name").val(e[0].Company_Name), $("#Contact_Name").val(e[0].Contact_Name), $("#Address").val(e[0].Address), $("#City").val(e[0].City), $("#State").val(e[0].State), $("#ZIP_Code").val(e[0].ZIP_Code), $("#Phone").val(e[0].Phone), $("#Email").val(e[0].Email), $("#Fax").val(e[0].Fax), $("#btnSave").hide(), $("#btnUpdate").show(), $(".modal-title").text("Update Customer"), $("#myModal").modal("show"), $(".modal-header").addClass("bg-primary"), $(".modal-header").removeClass("bg-success")) } }) } function deleteById(e) { progid = []; var a = $("#myTable").DataTable().row("#" + e).data(), t = a[1], o = a[2]; swal({ title: "Are you sure?", text: "Your will not be able to recover " + (t + ", " + o) + " Data!", type: "warning", showCancelButton: !0, confirmButtonColor: "#DD6B55", confirmButtonText: "Yes, delete it!", cancelButtonText: "No, cancel plx!", closeOnConfirm: !1, closeOnCancel: !1 }, (function (a) { a ? $.ajax({ type: "POST", url: "/Customer/DeleteDataByID", data: { id: e }, success: function (a) { if (a.success) if ("Delete" == a.Delete) { var t = $("#myTable").DataTable(); index = t.row("#" + e); t.row(index[0]).data(); t.row(index[0]).remove().draw(), progid.push(a.NextID), $("#Cust_ID").val(progid), $(".ui-pnotify").remove(), new PNotify({ title: "DELETED!", text: a.message, type: "error", animation: "slide", delay: 3e3, top: "500px", min_height: "16px", animate_speed: 400, text_escape: !0, styling: "bootstrap3" }), swal("Deleted!", a.message, "success"), setTimeout((function () { swal.close() }), 1e3) } else swal("Error!", a.message, "error"); else swal("WARNING!", "You cannot delete this info / No Permission", "warning") } }) : swal("Cancelled", "Your file is safe :)", "error") })) } $("#AddBtn").click((function () { resetDatafromFrom(), $("#btnSave").show(), $("#btnUpdate").hide(), $(".modal-title").text("Add New Customer"), $("#myModal").modal("show"), $(".modal-header").removeClass("bg-primary"), $(".modal-header").addClass("bg-success") })), $("#btnUpdate").click((function (e) { if ($("#myForm").valid()) { var a = document.forms.myForm, t = { type: "POST", url: a.action, data: new FormData(a), success: function (e) { if (e.success) { var t = $("#myTable").DataTable(); $("#myModal").modal("hide"), index = t.row("#" + a.Cust_ID.value); var o = t.row(index[0]).data(); o[1] = a.Cust_Code.value, o[2] = a.Company_Name.value, o[3] = a.Lookup.value, o[4] = a.Contact_Name.value, o[5] = a.Address.value, o[6] = a.City.value, o[7] = a.State.value, o[8] = a.ZIP_Code.value, o[9] = a.Phone.value, o[10] = a.Email.value, o[11] = a.Fax.value, t.row(index[0]).data(o).draw(), $(".ui-pnotify").remove(), new PNotify({ title: "SUCCESS!", text: e.message, type: "success", animation: "slide", delay: 3e3, top: "500px", min_height: "16px", animate_speed: 400, text_escape: !0, styling: "bootstrap3" }) } else swal("Error!", e.message, "error") } }; return "multipart/form-data" == $("form").attr("enctype") && (t.contentType = !1, t.processData = !1), $.ajax(t), !1 } })); var progid = []; function resetDatafromFrom() { $("#Cust_ID").prop("readonly", !0), $("#myForm")[0].reset(), $(".form-control.is-invalid").removeClass("is-invalid"), 0 == progid ? $("#Cust_ID").val(NextID) : $("#Cust_ID").val(progid) } $("#btnSave").click((function () { progid = []; var e = document.forms.myForm; if ($("#myForm").valid()) { var a = $("#myTable").DataTable(), t = { type: "POST", url: e.action, data: new FormData(e), success: function (t) { if (t.success) { $("#myModal").modal("hide"); var o = a.row.add(['<button onclick="getById(this.id)" id="' + e.Cust_ID.value + '" class="btn btn-primary">Edit</button> <button id="' + e.Cust_ID.value + '" class="btn btn-danger" onclick = "deleteById(id)" > Delete</button > ', e.Lookup.value, e.Cust_Code.value, e.Company_Name.value, e.Contact_Name.value, e.Address.value, e.City.value, e.State.value, e.ZIP_Code.value, e.Phone.value, e.Email.value, e.Fax.value]).draw(!1), s = $("#myTable").dataTable().fnGetNodes(o); $(s).attr("id", e.Cust_ID.value), progid.push(t.NextID), $("#Cust_ID").val(progid), $(".ui-pnotify").remove(), new PNotify({ title: "SUCCESS!", text: t.message, type: "success", animation: "slide", delay: 3e3, top: "500px", min_height: "16px", animate_speed: 400, text_escape: !0, styling: "bootstrap3" }) } else swal("Error!", t.message, "error") } }; return "multipart/form-data" == $("form").attr("enctype") && (t.contentType = !1, t.processData = !1), $.ajax(t), !1 } })), $(document).ready((function () { $("#btnUpdate").hide(), $("#myForm").validate({ rules: { Course_ID: { required: !0 } }, messages: { Course_ID: { required: "Please Enter Course ID" }, Email: { required: "Please enter a email address" } }, errorElement: "span", errorPlacement: function (e, a) { e.addClass("invalid-feedback"), a.closest(".form-group").append(e) }, highlight: function (e, a, t) { $(e).addClass("is-invalid") }, unhighlight: function (e, a, t) { $(e).removeClass("is-invalid") } }) })), $((function () { $("#myTable").DataTable({ select: { info: !1 }, order: [1, "asc"], columnDefs: [{ targets: [0], orderable: !1, width: 250 }, { targets: [2, 5], orderable: !1 }], language: { search: "", searchPlaceholder: "Search Course" }, select: !0, bLengthChange: !1, sScrollX: "100%", sScrollXInner: "100%", bScrollCollapse: !0, processing: !0, sPaginationType: "full_numbers", oLanguage: { sEmptyTable: "No data found, Please click on <b>Add New Customer</b> Button" } }), $('input[type="search"]').addClass("form-control") }));
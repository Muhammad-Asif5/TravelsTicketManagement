function getById(e) { resetDatafromFrom(), $.ajax({ type: "POST", url: "/EXP/GetDataById", data: { id: e }, success: function (e) { "" == e ? swal("WARNING!", "You cannot edit this info / No Permission", "warning") : ($("#Exp_Code").val(e[0].Exp_Code), $("#Account").val(e[0].Account), $("#Contact_Name").val(e[0].Contact_Name), $("#Cat_ID").val(e[0].Cat_ID), $("#btnSave").hide(), $("#btnUpdate").show(), $(".modal-title").text("Update EXP"), $("#myModal").modal("show"), $(".modal-header").addClass("bg-primary"), $(".modal-header").removeClass("bg-success")) } }) } function deleteById(t) { progid = []; var e = $("#myTable").DataTable().row("#" + t).data(), a = e[0], e = e[1]; swal({ title: "Are you sure?", text: "Your will not be able to recover " + (a + ", " + e) + " Data!", type: "warning", showCancelButton: !0, confirmButtonColor: "#DD6B55", confirmButtonText: "Yes, delete it!", cancelButtonText: "No, cancel plx!", closeOnConfirm: !1, closeOnCancel: !1 }, function (e) { e ? $.ajax({ type: "POST", url: "/EXP/DeleteDataByID", data: { id: t }, success: function (e) { var a; e.success ? "Delete" == e.Delete ? (a = $("#myTable").DataTable(), index = a.row("#" + t), a.row(index[0]).data(), a.row(index[0]).remove().draw(), progid.push(e.NextID), $("#Exp_Code").val(progid), $(".ui-pnotify").remove(), new PNotify({ title: "DELETED!", text: e.message, type: "error", animation: "slide", delay: 3e3, top: "500px", min_height: "16px", animate_speed: 400, text_escape: !0, styling: "bootstrap3" }), swal("Deleted!", e.message, "success"), setTimeout(function () { swal.close() }, 1e3)) : swal("Error!", e.message, "error") : swal("WARNING!", "You cannot delete this info / No Permission", "warning") } }) : swal("Cancelled", "Your file is safe :)", "error") }) } $("#AddBtn").click(function () { resetDatafromFrom(), $("#btnSave").show(), $("#btnUpdate").hide(), $(".modal-title").text("Add New EXP"), $("#myModal").modal("show"), $(".modal-header").removeClass("bg-primary"), $(".modal-header").addClass("bg-success") }), $("#btnUpdate").click(function (e) { if ($("#myForm").valid()) { var o = document.forms.myForm, a = { type: "POST", url: o.action, data: new FormData(o), success: function (e) { var a, t; e.success ? (a = $("#myTable").DataTable(), $("#myModal").modal("hide"), index = a.row("#" + o.Exp_Code.value), (t = a.row(index[0]).data())[0] = o.Account.value, t[1] = o.Contact_Name.value, a.row(index[0]).data(t).draw(), $(".ui-pnotify").remove(), new PNotify({ title: "SUCCESS!", text: e.message, type: "success", animation: "slide", delay: 3e3, top: "500px", min_height: "16px", animate_speed: 400, text_escape: !0, styling: "bootstrap3" })) : swal("Error!", e.message, "error") } }; return "multipart/form-data" == $("form").attr("enctype") && (a.contentType = !1, a.processData = !1), $.ajax(a), !1 } }); var progid = []; function resetDatafromFrom() { $("#Exp_Code").prop("readonly", !0), $("#myForm")[0].reset(), $(".form-control.is-invalid").removeClass("is-invalid"), 0 == progid ? $("#Exp_Code").val(NextID) : $("#Exp_Code").val(progid) } $("#btnSave").click(function () { progid = []; var t = document.forms.myForm; if ($("#myForm").valid()) { var o = $("#myTable").DataTable(), e = { type: "POST", url: t.action, data: new FormData(t), success: function (e) { var a; e.success ? ($("#myModal").modal("hide"), a = o.row.add([t.Account.value, t.Contact_Name.value, '<label class="badge bg-info">Daily Expenses</label>', '<button onclick="getById(this.id)" id="' + t.Exp_Code.value + '" class="btn btn-primary btn-sm">Edit</button> <button id="' + t.Exp_Code.value + '" class="btn btn-danger btn-sm" onclick = "deleteById(id)" > Delete</button > ']).draw(!1), a = $("#myTable").dataTable().fnGetNodes(a), $(a).attr("id", t.Exp_Code.value), progid.push(e.NextID), $("#Exp_Code").val(progid), $(".ui-pnotify").remove(), new PNotify({ title: "SUCCESS!", text: e.message, type: "success", animation: "slide", delay: 3e3, top: "500px", min_height: "16px", animate_speed: 400, text_escape: !0, styling: "bootstrap3" })) : swal("Error!", e.message, "error") } }; return "multipart/form-data" == $("form").attr("enctype") && (e.contentType = !1, e.processData = !1), $.ajax(e), !1 } }), $(document).ready(function () { $("#btnUpdate").hide(), $("#myForm").validate({ rules: { Course_ID: { required: !0 } }, messages: { Account: { required: "Please Enter Account" }, Contact_Name: { required: "Please Enter Contact Name" } }, errorElement: "span", errorPlacement: function (e, a) { e.addClass("invalid-feedback"), a.closest(".form-group").append(e) }, highlight: function (e, a, t) { $(e).addClass("is-invalid") }, unhighlight: function (e, a, t) { $(e).removeClass("is-invalid") } }) }), $(function () { $("#myTable").DataTable({ select: !0, columnDefs: [{ targets: [3], orderable: !1 }], language: { search: "", searchPlaceholder: "Search Course" }, responsive: !0, bLengthChange: !1, sScrollX: "100%", sScrollXInner: "100%", bScrollCollapse: !0, processing: !0, sPaginationType: "full_numbers", oLanguage: { sEmptyTable: "No data found, Please click on <b>Add Course</b> Button" } }), $('input[type="search"]').addClass("form-control") });
function getById(e) { resetDatafromFrom(), $.ajax({ type: "POST", url: "/Agent/GetDataById", data: { id: e }, success: function (e) { 1 == e.success && ($("#Agent_ID").val(e.check[0].Agent_ID), $("#Agent_Name").val(e.check[0].Agent_Name), $("#Agent_Status").val(e.check[0].Agent_Status), $("#btnSave").hide(), $("#btnUpdate").show(), $(".modal-title").text("Update Agent"), $("#myModal").modal("show"), $(".modal-header").addClass("bg-primary"), $(".modal-header").removeClass("bg-success")), "" == e && swal("WARNING!", "You cannot edit this info / No Permission", "warning") }, error: function (e) { alert(e) } }) } function deleteById(e) { progid = []; var t = $("#myTable").DataTable().row("#" + e).data()[0]; swal({ title: "Are you sure?", text: "Your will not be able to recover " + t + " Data!", type: "warning", showCancelButton: !0, confirmButtonColor: "#DD6B55", confirmButtonText: "Yes, delete it!", cancelButtonText: "No, cancel plx!", closeOnConfirm: !1, closeOnCancel: !1 }, function (t) { t ? $.ajax({ type: "POST", url: "/Agent/DeleteDataByID", data: { id: e }, success: function (t) { if (t.success) if ("Delete" == t.Delete) { var a = $("#myTable").DataTable(); index = a.row("#" + e); a.row(index[0]).data(); a.row(index[0]).remove().draw(), progid.push(t.NextID), $("#Agent_ID").val(progid), $(".ui-pnotify").remove(), new PNotify({ title: "DELETED!", text: t.message, type: "error", animation: "slide", delay: 3e3, top: "500px", min_height: "16px", animate_speed: 400, text_escape: !0, styling: "bootstrap3" }), swal("Deleted!", t.message, "success"), setTimeout(function () { swal.close() }, 1e3) } else swal("Error!", t.message, "error"); else swal("WARNING!", "You cannot delete this info / No Permission", "warning") } }) : swal("Cancelled", "Your file is safe :)", "error") }) } $("#AddBtn").click(function () { resetDatafromFrom(), $("#btnSave").show(), $("#btnUpdate").hide(), $(".modal-title").text("Add New Agent"), $("#myModal").modal("show"), $(".modal-header").removeClass("bg-primary"), $(".modal-header").addClass("bg-success") }), $("#btnUpdate").click(function (e) { if ($("#myForm").valid()) { var t = document.forms.myForm, a = { type: "POST", url: t.action, data: new FormData(t), success: function (e) { if (e.success) { var a = $("#myTable").DataTable(); $("#myModal").modal("hide"), index = a.row("#" + t.Agent_ID.value); var n = a.row(index[0]).data(); "1" == t.Agent_Status.value ? (n[0] = t.Agent_Name.value, n[1] = '<label class="badge bg-success">Active</label>') : (n[0] = t.Agent_Name.value, n[1] = '<label class="badge bg-danger">Closed</label>'), a.row(index[0]).data(n).draw(), $(".ui-pnotify").remove(), new PNotify({ title: "SUCCESS!", text: e.message, type: "success", animation: "slide", delay: 3e3, top: "500px", min_height: "16px", animate_speed: 400, text_escape: !0, styling: "bootstrap3" }) } else swal("Error!", e.message, "error") } }; return "multipart/form-data" == $("form").attr("enctype") && (a.contentType = !1, a.processData = !1), $.ajax(a), !1 } }); var progid = []; function resetDatafromFrom() { $("#Agent_ID").prop("readonly", !0), $("#myForm")[0].reset(), $(".form-control.is-invalid").removeClass("is-invalid"), 0 == progid ? $("#Agent_ID").val(NextID) : $("#Agent_ID").val(progid) } $("#btnSave").click(function () { progid = []; var e = document.forms.myForm; if ($("#myForm").valid()) { var t = $("#myTable").DataTable(), a = { type: "POST", url: e.action, data: new FormData(e), success: function (a) { if (a.success) { if ($("#myModal").modal("hide"), "1" == e.Agent_Status.value) var n = t.row.add([e.Agent_Name.value, '<label class="badge bg-success">Active</label>', '<button onclick="getById(this.id)" id="' + e[" Agent_ID"].value + '" class="btn btn-primary btn-sm">Edit</button> <button id="' + e[" Agent_ID"].value + '" class="btn btn-danger btn-sm" onclick = "deleteById(id)" > Delete</button > ']).draw(!1); else n = t.row.add([e.Agent_Name.value, '<label class="badge bg-danger">Closed</label>', '<button onclick="getById(this.id)" id="' + e.Agent_ID.value + '" class="btn btn-primary btn-sm">Edit</button> <button id="' + e.Agent_ID.value + '" class="btn btn-danger btn-sm" onclick="deleteById(id)">Delete</button>']).draw(!1); var s = $("#myTable").dataTable().fnGetNodes(n); $(s).attr("id", e.Agent_ID.value), progid.push(a.NextID), $("#Agent_ID").val(progid), $(".ui-pnotify").remove(), new PNotify({ title: "SUCCESS!", text: a.message, type: "success", animation: "slide", delay: 3e3, top: "500px", min_height: "16px", animate_speed: 400, text_escape: !0, styling: "bootstrap3" }) } else swal("Error!", a.message, "error") } }; return "multipart/form-data" == $("form").attr("enctype") && (a.contentType = !1, a.processData = !1), $.ajax(a), !1 } }), $(document).ready(function () { $("#btnUpdate").hide(), $("#myForm").validate({ rules: { Course_ID: { required: !0 } }, messages: { Agent_ID: { required: "Please Enter Agent ID" }, Agent_Name: { required: "Please Enter Agent Name" }, Agent_Status: { required: "Please Select Agent Status" }, Email: { required: "Please enter a email address" } }, errorElement: "span", errorPlacement: function (e, t) { e.addClass("invalid-feedback"), t.closest(".form-group").append(e) }, highlight: function (e, t, a) { $(e).addClass("is-invalid") }, unhighlight: function (e, t, a) { $(e).removeClass("is-invalid") } }) }), $(function () { $("#myTable").DataTable({ select: { info: !1 }, columnDefs: [{ targets: [2], orderable: !1 }], language: { search: "", searchPlaceholder: "Search Course" }, responsive: !0, select: !0, bLengthChange: !1, sScrollX: "100%", sScrollXInner: "100%", bScrollCollapse: !0, processing: !0, sPaginationType: "full_numbers", oLanguage: { sEmptyTable: "No data found, Please click on <b>Add Course</b> Button" } }), $('input[type="search"]').addClass("form-control") });
function viewReport() { var e = $("#reservation").val(), t = e.substring(0, 10), e = e.substring(13); $("#myTable").DataTable().destroy(), $("table tbody").empty(), $.ajax({ type: "GET", url: "/CashBook/GetCashBook", data: { Dfrom: t, Dto: e }, success: OnSuccess, failure: function (e) { alert(e.d) }, error: function (e) { alert(e.d) } }), $("#myTable tfoot th").each(function (e) { var t = $(this).text(); "Cust Code" != t && "Payable Code" != t && "Payable Supplier" != t && "Agent Name" != t && "Ticket Class" != t && ($(this).html('<input style="width:150px;" type="text" class="form-control" placeholder="Search ' + t + '" />'), $("input", this).on("keyup change clear", function () { table.column(e).search() !== this.value && table.column(e).search(this.value).draw() })) }), $(".select2").val(null).trigger("change") } var table; function myDatatable() { $.ajax({ type: "GET", url: "/CashBook/GetCashBook", data: { Dfrom: null, Dto: null }, contentType: "application/json; charset=utf-8", dataType: "json", success: OnSuccess, failure: function (e) { alert(e.d) }, error: function (e) { alert(e.d) } }), $("#myTable tfoot th").each(function (e) { var t = $(this).text(); "Cust Code" != t && "Payable Code" != t && "Payable Supplier" != t && "Agent Name" != t && "Ticket Class" != t && ($(this).html('<input style="width:150px;" type="text" class="form-control" placeholder="Search ' + t + '" />'), $("input", this).on("keyup change clear", function () { table.column(e).search() !== this.value && table.column(e).search(this.value).draw() })) }) } function OnSuccess(e) { var t; 1 == e.success ? (table = $("#myTable").DataTable({ lengthMenu: [[20, 25, 50,300], [20, 25, 50,300]], orderCellsTop: !0, fixedHeader: !0, scrollCollapse: !0, scrollX: !0, select: !0, scrollY: "50vh", processing: !0, data: e.CashBook.Data, columns: [{ title: "Date", data: "Date", render: function (e) { return null == e ? "" : moment(e).format("DD/MMM/YYYY") } }, { data: "Receipt_Ref" }, { data: "Payment_Ref" }, { data: "Narration" }, { data: "Received_Paid" }, { data: "Debit" }, { data: "Credit", render: function (e) { return null == e ? "" : "$ " + e } }, { data: "Balance", render: function (e) { return null == e ? "" : "$ " + e } }, { data: "Cust_Code" }, { data: "Payable_Code" }, { data: "Account" }], initComplete: function () { count = 0, this.api().columns([4, 8, 9, 10]).every(function () { var e = this.header(), e = $(e).html().replace(/[\W]/g, "-"), t = this, a = $('<select style="width:100%" id="' + e + '" class="select2" ></select>').appendTo($(t.footer()).empty()).on("change", function () { var e = $.map($(this).select2("data"), function (e, t) { return e.text ? "^" + $.fn.dataTable.util.escapeRegex(e.text) + "$" : null }); 0 === e.length && (e = [""]); e = e.join("|"); t.search(e || "", !0, !1).draw() }); t.data().unique().sort().each(function (e, t) { a.append('<option value="' + e + '">' + e + "</option>") }), $("#" + e).select2({ multiple: !0, closeOnSelect: !1, placeholder: "Select a " + e }), $(".select2").val(null).trigger("change") }) }, columnDefs: [{ targets: 0, type: "date", width: "100px" }], language: { search: "", lengthMenu: "Select _MENU_ ", zeroRecords: "No <b>Cash Book</b> Data Found", infoEmpty: "No Records Available", infoFiltered: "(filtered from _MAX_ total records)" }, dom: "lBfrtip", buttons: [{ extend: "copyHtml5", title: "Cash Book" }, { extend: "csvHtml5", title: "Cash Book" }, { extend: "excelHtml5", title: "Cash Book", text: "Excel", sheetName: "Cash Book", messageTop: "Brillant Travel Account Management System, Cash Book" }, { extend: "pdfHtml5", title: "Cash Book", messageTop: "Brillant Travel Account Management System, Cash Book", orientation: "portrait", pageSize: "A4" }] }), $(".dataTables_filter input").attr("placeholder", "Search Cash Book"), $(".dataTables_filter input").addClass("form-control")) : ($("#myTable").DataTable({ bLengthChange: !1, orderCellsTop: !0, fixedHeader: !0, scrollCollapse: !0, searching: !1, scrollX: !0, scrollY: "50vh", processing: !0, language: { search: "", lengthMenu: "Select _MENU_ ", zeroRecords: "No <b>Cash Book</b> Data Found", infoEmpty: "No Records Available", infoFiltered: "(filtered from _MAX_ total records)" } }), t = $("#reservation").val(), swal("INFO!", e.message + " for " + t, "info")) } $("#reservation").daterangepicker(), $(document).ready(function () { myDatatable() });